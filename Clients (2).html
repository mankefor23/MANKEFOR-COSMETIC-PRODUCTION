<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PRECIOUS COSMETICS - Client Dashboard</title>
    <style>
      :root {
        --dark-blue: #1a237e;
        --medium-blue: #283593;
        --light-blue: #3949ab;
        --orange: #ff9800;
        --dark-orange: #f57c00;
      }

      body {
        font-family: Arial, sans-serif;
        display: flex;
        margin: 0;
        background: #f4f6f9;
      }

      /* Sidebar */
      .sidebar {
        width: 220px;
        background: var(--dark-blue);
        color: white;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      .sidebar h2 {
        text-align: center;
        padding: 20px 0;
        background: var(--medium-blue);
        margin: 0;
      }
      .sidebar a {
        color: white;
        text-decoration: none;
        padding: 12px 20px;
        display: block;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      .sidebar a:hover {
        background: var(--light-blue);
      }

      /* Main Content */
      .main {
        flex: 1;
        padding: 20px;
      }
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: white;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      }
      header h1 {
        font-size: 22px;
        color: var(--dark-blue);
        margin: 0;
      }
      header button {
        padding: 8px 12px;
        background: var(--orange);
        border: none;
        color: white;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
      }
      header button:hover {
        background: var(--dark-orange);
      }

      /* Orders Table */
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        overflow: hidden;
      }
      th,
      td {
        padding: 12px;
        border: 1px solid #ddd;
        text-align: center;
      }
      th {
        background: var(--dark-blue);
        color: white;
      }
      tr:nth-child(even) {
        background-color: #f9f9f9;
      }
      tr:hover {
        background-color: #f1f1f1;
      }

      button.confirm {
        background: #27ae60;
        border: none;
        color: white;
        padding: 6px 10px;
        border-radius: 5px;
        cursor: pointer;
      }
      button.confirm:hover {
        background: #219150;
      }

      /* Place Order Form */
      .place-order {
        margin-top: 20px;
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      }
      .place-order h3 {
        color: var(--dark-blue);
        margin-top: 0;
      }
      .place-order label {
        display: block;
        margin-top: 15px;
        font-weight: bold;
        color: var(--dark-blue);
      }
      .place-order input,
      .place-order select {
        width: 100%;
        padding: 10px;
        margin-top: 6px;
        border-radius: 6px;
        border: 1px solid #ccc;
        box-sizing: border-box;
      }
      .place-order button {
        margin-top: 20px;
        width: 100%;
        padding: 12px;
        border: none;
        background: var(--orange);
        color: white;
        border-radius: 6px;
        cursor: pointer;
        font-weight: bold;
        font-size: 16px;
      }
      .place-order button:hover {
        background: var(--dark-orange);
      }

      /* Order Items Section */
      .order-items {
        margin-top: 15px;
      }
      .item-row {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        align-items: center;
      }
      .item-row select {
        flex: 2;
      }
      .item-row input {
        flex: 1;
      }
      .item-row button {
        flex: 0.5;
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        padding: 10px;
      }
      .item-row button:hover {
        background: #c0392b;
      }

      /* Receipt Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background: white;
        padding: 30px;
        border-radius: 10px;
        width: 80%;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
      }
      .receipt-header {
        text-align: center;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--orange);
        padding-bottom: 15px;
      }
      .receipt-header h2 {
        color: var(--dark-blue);
        margin: 0;
      }
      .receipt-header p {
        margin: 5px 0;
        color: #666;
      }
      .receipt-details {
        margin-bottom: 20px;
      }
      .receipt-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
      }
      .receipt-table th {
        background: var(--dark-blue);
        color: white;
        text-align: left;
        padding: 10px;
      }
      .receipt-table td {
        padding: 10px;
        border-bottom: 1px solid #ddd;
      }
      .receipt-total {
        text-align: right;
        font-weight: bold;
        font-size: 18px;
        margin-top: 15px;
        border-top: 2px solid var(--orange);
        padding-top: 10px;
      }
      .receipt-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 20px;
      }
      .receipt-actions button {
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
      }
      .btn-close {
        background: #95a5a6;
        color: white;
      }
      .btn-close:hover {
        background: #7f8c8d;
      }
      .btn-download {
        background: var(--orange);
        color: white;
      }
      .btn-download:hover {
        background: var(--dark-orange);
      }

      /* Tabs for navigation */
      .tabs {
        display: flex;
        margin-top: 20px;
        border-bottom: 2px solid var(--dark-blue);
      }
      .tab {
        padding: 10px 20px;
        cursor: pointer;
        background: #e0e0e0;
        margin-right: 5px;
        border-radius: 5px 5px 0 0;
        font-weight: bold;
      }
      .tab.active {
        background: var(--dark-blue);
        color: white;
      }
      .tab-content {
        display: none;
        padding: 20px 0;
      }
      .tab-content.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="sidebar">
      <h2>MANKEFOR COSMETICS PRODUCTION</h2>
      <a href="#" onclick="showTab('home')">üè† Home</a>
      <a href="#" onclick="showTab('orders')">üõí My Orders</a>
      <a href="#" onclick="showTab('receipts')">üìë Receipts</a>
      <a href="#">‚öôÔ∏è Profile</a>
      <a href="product.html">‚öôÔ∏è Product</a>
      <a href="#">üìû Support</a>
      <a href="#" onclick="logout()">üö™ Logout</a>
    </div>

    <div class="main">
      <header>
        <h1>Welcome, <span id="customerName">Customer</span></h1>
        <button onclick="logout()">Logout</button>
      </header>

      <!-- Tab Navigation -->
      <div class="tabs">
        <div class="tab active" onclick="showTab('home')">Home</div>
        <div class="tab" onclick="showTab('orders')">My Orders</div>
        <div class="tab" onclick="showTab('receipts')">Receipts</div>
        <div class="tab" onclick="showTab('product')">Product</div>
      </div>

      <!-- Home Tab Content -->
      <div id="home" class="tab-content active">
        <!-- Place New Order -->
        <div class="place-order">
          <h3>Place New Order</h3>

          <label>Customer Name</label>
          <input
            type="text"
            id="customerNameInput"
            placeholder="Enter your full name"
          />

          <label>Payment Method</label>
          <select id="paymentMethod">
            <option value="">-- Select Payment --</option>
            <option value="MTN">MTN</option>
            <option value="Orange">Orange</option>
            <option value="Cash on Delivery">Cash on Delivery</option>
          </select>

          <label>Phone Number</label>
          <input type="text" id="phone" placeholder="Enter Number" />

          <label>Delivery Location</label>
          <input type="text" id="location" placeholder="Enter Address" />

          <label>Delivery Date</label>
          <input type="date" id="deliveryDate" />

          <div class="order-items">
            <h4>Order Items</h4>
            <div id="itemsContainer">
              <div class="item-row">
                <select class="productSelect">
                  <option value="">-- Select Product --</option>
                  <option value="Precious Liquid" data-price="25.00">
                    Precious Liquid - $25.00
                  </option>
                  <option value="Precious Essence" data-price="35.00">
                    Precious Essence - $35.00
                  </option>
                  <option value="Precious Pure Wash" data-price="20.00">
                    Precious Pure Wash - $20.00
                  </option>
                  <option value="Precious Bath Glow" data-price="30.00">
                    Precious Bath Glow - $30.00
                  </option>
                  <option value="Precious Pure Bleach" data-price="40.00">
                    Precious Pure Bleach - $40.00
                  </option>
                </select>
                <input
                  type="number"
                  class="quantity"
                  placeholder="Qty"
                  min="1"
                  value="1"
                />
                <button onclick="removeItem(this)" class="remove-btn">
                  Remove
                </button>
              </div>
            </div>
            <button
              onclick="addItem()"
              style="margin-top: 10px; width: auto; padding: 8px 15px"
            >
              + Add Another Item
            </button>
          </div>

          <button onclick="placeOrder()">Place Order</button>
        </div>
      </div>

      <!-- Orders Tab Content -->
      <div id="orders" class="tab-content">
        <h3>My Orders</h3>
        <table>
          <thead>
            <tr>
              <th>Order ID</th>
              <th>Product(s)</th>
              <th>Payment</th>
              <th>Phone</th>
              <th>Location</th>
              <th>Date</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="ordersTable">
            <!-- Orders will appear here -->
          </tbody>
        </table>
      </div>

      <!-- Receipts Tab Content -->
      <div id="receipts" class="tab-content">
        <h3>Order Receipts</h3>
        <table>
          <thead>
            <tr>
              <th>Receipt ID</th>
              <th>Order ID</th>
              <th>Date</th>
              <th>Total Amount</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="receiptsTable">
            <!-- Receipts will appear here -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receiptModal" class="modal">
      <div class="modal-content">
        <div class="receipt-header">
          <h2>PRECIOUS COSMETICS</h2>
          <p>123 Beauty Street, Cosmetics City</p>
          <p>Phone: (123) 456-7890 | Email: info@preciouscosmetics.com</p>
          <h3>ORDER RECEIPT</h3>
        </div>

        <div class="receipt-details">
          <p><strong>Receipt ID:</strong> <span id="receiptId"></span></p>
          <p><strong>Order ID:</strong> <span id="orderId"></span></p>
          <p><strong>Customer:</strong> <span id="receiptCustomer"></span></p>
          <p><strong>Date:</strong> <span id="receiptDate"></span></p>
          <p>
            <strong>Payment Method:</strong> <span id="receiptPayment"></span>
          </p>
        </div>

        <table class="receipt-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Unit Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody id="receiptItems">
            <!-- Receipt items will appear here -->
          </tbody>
        </table>

        <div class="receipt-total">
          Total: $<span id="receiptTotal">0.00</span>
        </div>

        <div class="receipt-actions">
          <button class="btn-close" onclick="closeReceipt()">Close</button>
          <button class="btn-download" onclick="downloadReceipt()">
            Download PDF
          </button>
        </div>
      </div>
    </div>

    <script>
      // Product data with prices
      const products = [
        { name: "Precious Liquid", price: 25.0 },
        { name: "Precious Essence", price: 35.0 },
        { name: "Precious Pure Wash", price: 20.0 },
        { name: "Precious Bath Glow", price: 30.0 },
        { name: "Precious Pure Bleach", price: 40.0 },
      ];

      let orders = [];
      let receipts = [];
      let orderCounter = 1000; // Starting order ID
      let receiptCounter = 5000; // Starting receipt ID

      // Initialize the page
      document.addEventListener("DOMContentLoaded", function () {
        renderOrders();
        renderReceipts();

        // Set today's date as default for delivery date
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("deliveryDate").value = today;
      });

      // Tab navigation
      function showTab(tabName) {
        // Hide all tab contents
        document.querySelectorAll(".tab-content").forEach((tab) => {
          tab.classList.remove("active");
        });

        // Show selected tab content
        document.getElementById(tabName).classList.add("active");

        // Update active tab
        document.querySelectorAll(".tab").forEach((tab) => {
          tab.classList.remove("active");
        });

        // Find and activate the corresponding tab
        document.querySelectorAll(".tab").forEach((tab) => {
          if (tab.textContent.toLowerCase().includes(tabName.toLowerCase())) {
            tab.classList.add("active");
          }
        });
      }

      // Add item row to order form
      function addItem() {
        const container = document.getElementById("itemsContainer");
        const newRow = document.createElement("div");
        newRow.className = "item-row";
        newRow.innerHTML = `
          <select class="productSelect">
            <option value="">-- Select Product --</option>
            ${products.map((p) => `<option value="${p.name}" data-price="${p.price}">${p.name} - $${p.price.toFixed(2)}</option>`).join("")}
          </select>
          <input type="number" class="quantity" placeholder="Qty" min="1" value="1">
          <button onclick="removeItem(this)" class="remove-btn">Remove</button>
        `;
        container.appendChild(newRow);
      }

      // Remove item row from order form
      function removeItem(button) {
        const container = document.getElementById("itemsContainer");
        if (container.children.length > 1) {
          button.parentElement.remove();
        } else {
          alert("You need at least one item in your order.");
        }
      }

      // Place a new order
      function placeOrder() {
        const customerName = document.getElementById("customerNameInput").value;
        const payment = document.getElementById("paymentMethod").value;
        const phone = document.getElementById("phone").value;
        const location = document.getElementById("location").value;
        const date = document.getElementById("deliveryDate").value;

        // Update customer name in header
        document.getElementById("customerName").textContent = customerName;

        // Validate required fields
        if (!customerName || !payment || !phone || !location || !date) {
          alert("Please fill all required fields!");
          return;
        }

        // Collect order items
        const items = [];
        let isValid = true;

        document.querySelectorAll(".item-row").forEach((row) => {
          const productSelect = row.querySelector(".productSelect");
          const quantityInput = row.querySelector(".quantity");

          if (!productSelect.value) {
            alert("Please select a product for all items!");
            isValid = false;
            return;
          }

          if (!quantityInput.value || parseInt(quantityInput.value) < 1) {
            alert("Please enter a valid quantity for all items!");
            isValid = false;
            return;
          }

          const product = products.find((p) => p.name === productSelect.value);
          items.push({
            product: product.name,
            quantity: parseInt(quantityInput.value),
            price: product.price,
          });
        });

        if (!isValid) return;

        // Calculate total
        const total = items.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0,
        );

        // Create order
        const orderId = orderCounter++;
        const order = {
          id: orderId,
          customerName,
          payment,
          phone,
          location,
          date,
          items,
          total,
          status: "Pending",
          timestamp: new Date().toISOString(),
        };

        orders.push(order);

        // Create receipt
        const receiptId = receiptCounter++;
        const receipt = {
          id: receiptId,
          orderId: orderId,
          customerName,
          payment,
          date: new Date().toLocaleDateString(),
          items,
          total,
          timestamp: new Date().toISOString(),
        };

        receipts.push(receipt);

        // Update UI
        renderOrders();
        renderReceipts();

        // Reset form
        document.getElementById("customerNameInput").value = "";
        document.getElementById("paymentMethod").selectedIndex = 0;
        document.getElementById("phone").value = "";
        document.getElementById("location").value = "";

        // Reset items to one row
        const container = document.getElementById("itemsContainer");
        container.innerHTML = `
          <div class="item-row">
            <select class="productSelect">
              <option value="">-- Select Product --</option>
              ${products.map((p) => `<option value="${p.name}" data-price="${p.price}">${p.name} - $${p.price.toFixed(2)}</option>`).join("")}
            </select>
            <input type="number" class="quantity" placeholder="Qty" min="1" value="1">
            <button onclick="removeItem(this)" class="remove-btn">Remove</button>
          </div>
        `;

        alert(`Order #${orderId} placed successfully!`);
        showTab("orders");
      }

      // Render orders table
      function renderOrders() {
        const tbody = document.getElementById("ordersTable");
        tbody.innerHTML = "";

        if (orders.length === 0) {
          tbody.innerHTML =
            '<tr><td colspan="8" style="text-align: center;">No orders found</td></tr>';
          return;
        }

        orders.forEach((order) => {
          const productList = order.items
            .map((item) => `${item.product} (x${item.quantity})`)
            .join(", ");

          tbody.innerHTML += `
            <tr>
              <td>#${order.id}</td>
              <td>${productList}</td>
              <td>${order.payment}</td>
              <td>${order.phone}</td>
              <td>${order.location}</td>
              <td>${order.date}</td>
              <td>${order.status}</td>
              <td>
                <button class="confirm" onclick="viewReceipt(${order.id})">View Receipt</button>
              </td>
            </tr>
          `;
        });
      }

      // Render receipts table
      function renderReceipts() {
        const tbody = document.getElementById("receiptsTable");
        tbody.innerHTML = "";

        if (receipts.length === 0) {
          tbody.innerHTML =
            '<tr><td colspan="5" style="text-align: center;">No receipts found</td></tr>';
          return;
        }

        receipts.forEach((receipt) => {
          tbody.innerHTML += `
            <tr>
              <td>#${receipt.id}</td>
              <td>#${receipt.orderId}</td>
              <td>${receipt.date}</td>
              <td>$${receipt.total.toFixed(2)}</td>
              <td>
                <button class="confirm" onclick="viewReceipt(${receipt.orderId})">View</button>
                <button class="btn-download" onclick="downloadReceiptFromTable(${receipt.orderId})" style="padding: 5px 10px; margin-left: 5px;">Download</button>
              </td>
            </tr>
          `;
        });
      }

      // View receipt in modal
      function viewReceipt(orderId) {
        const receipt = receipts.find((r) => r.orderId === orderId);
        if (!receipt) {
          alert("Receipt not found for this order.");
          return;
        }

        // Populate receipt modal
        document.getElementById("receiptId").textContent = receipt.id;
        document.getElementById("orderId").textContent = receipt.orderId;
        document.getElementById("receiptCustomer").textContent =
          receipt.customerName;
        document.getElementById("receiptDate").textContent = receipt.date;
        document.getElementById("receiptPayment").textContent = receipt.payment;

        // Populate receipt items
        const itemsBody = document.getElementById("receiptItems");
        itemsBody.innerHTML = "";

        receipt.items.forEach((item) => {
          itemsBody.innerHTML += `
            <tr>
              <td>${item.product}</td>
              <td>${item.quantity}</td>
              <td>$${item.price.toFixed(2)}</td>
              <td>$${(item.price * item.quantity).toFixed(2)}</td>
            </tr>
          `;
        });

        // Set total
        document.getElementById("receiptTotal").textContent =
          receipt.total.toFixed(2);

        // Show modal
        document.getElementById("receiptModal").style.display = "flex";
      }

      // Close receipt modal
      function closeReceipt() {
        document.getElementById("receiptModal").style.display = "none";
      }

      // Download receipt as PDF
      function downloadReceipt() {
        // In a real application, this would generate an actual PDF
        // For this example, we'll simulate the download
        const receiptId = document.getElementById("receiptId").textContent;
        alert(`Downloading receipt #${receiptId} as PDF...`);

        // In a real implementation, you would use a library like jsPDF
        // Here's a simplified example of what that might look like:
        /*
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        
        // Add content to PDF
        doc.text('PRECIOUS COSMETICS', 20, 20);
        doc.text(`Receipt ID: ${receiptId}`, 20, 30);
        // ... more content
        
        // Save the PDF
        doc.save(`receipt-${receiptId}.pdf`);
        */
      }

      // Download receipt from receipts table
      function downloadReceiptFromTable(orderId) {
        const receipt = receipts.find((r) => r.orderId === orderId);
        if (receipt) {
          alert(
            `Downloading receipt #${receipt.id} for order #${orderId} as PDF...`,
          );
          // Actual PDF generation would go here
        }
      }

      // Logout function
      function logout() {
        alert("Logged out!");
        // In a real application, you would redirect to login page
        // window.location.href = 'login.html';
      }
    </script>
  </body>
</html>
