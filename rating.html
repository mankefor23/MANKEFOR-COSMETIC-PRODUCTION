<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout, Tracking & Rating</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        padding: 20px;
      }
      .container {
        max-width: 450px;
        margin: auto;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      h1 {
        text-align: center;
        font-size: 20px;
      }
      label {
        display: block;
        margin-top: 10px;
        font-weight: bold;
      }
      input,
      select,
      textarea {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      button {
        width: 100%;
        padding: 10px;
        background: #6c5ce7;
        color: white;
        border: none;
        border-radius: 5px;
        margin-top: 15px;
        cursor: pointer;
      }
      button:hover {
        background: #5a4acb;
      }
      .status {
        background: #d1fae5;
        color: #065f46;
        padding: 8px;
        border-radius: 5px;
        margin-top: 5px;
      }
      .stars {
        display: flex;
        gap: 5px;
        font-size: 25px;
        cursor: pointer;
      }
      .star {
        color: #ccc;
      }
      .star.active {
        color: gold;
      }
      .review {
        background: #f9fafb;
        padding: 10px;
        margin-top: 10px;
        border-left: 3px solid #6c5ce7;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <!-- Checkout Section -->
    <div class="container">
      <h1>Checkout Form</h1>
      <form id="checkoutForm">
        <label for="fullname">Full Name</label>
        <input type="text" id="fullname" required />

        <label for="email">Email</label>
        <input type="email" id="email" required />

        <label for="product">Select Product</label>
        <select id="product" required>
          <option value="">-- Choose a product --</option>
          <option value="Premium Lace">Premium Lace ($9.99)</option>
          <option value="Luxury Lace">Luxury Lace ($14.99)</option>
          <option value="Deluxe Lace">Deluxe Lace ($19.99)</option>
        </select>

        <label for="delivery">Delivery Date</label>
        <input type="date" id="delivery" required />

        <p><strong>Payment Method:</strong></p>
        <label
          ><input type="radio" name="method" value="mtn" required /> MTN Mobile
          Money</label
        >
        <label
          ><input type="radio" name="method" value="orange" /> Orange
          Money</label
        >
        <label
          ><input type="radio" name="method" value="cash" /> Cash on
          Delivery</label
        >

        <button type="submit">Place Order</button>
      </form>
      <div id="result"></div>
    </div>

    <!-- Tracking Section -->
    <div class="container">
      <h1>Track Your Order</h1>
      <form id="trackForm">
        <label for="orderId">Enter Order ID</label>
        <input type="text" id="orderId" placeholder="e.g. #123456" required />
        <button type="submit">Track</button>
      </form>
      <div id="trackResult"></div>
    </div>

    <!-- Rating Section -->
    <div class="container">
      <h1>Rate a Product</h1>
      <form id="ratingForm">
        <label for="rateProduct">Choose Product</label>
        <select id="rateProduct" required>
          <option value="">-- Select --</option>
          <option value="Premium Lace">Premium Lace</option>
          <option value="Luxury Lace">Luxury Lace</option>
          <option value="Deluxe Lace">Deluxe Lace</option>
        </select>

        <p><strong>Rate:</strong></p>
        <div class="stars" id="stars">
          <span class="star" data-value="1">&#9733;</span>
          <span class="star" data-value="2">&#9733;</span>
          <span class="star" data-value="3">&#9733;</span>
          <span class="star" data-value="4">&#9733;</span>
          <span class="star" data-value="5">&#9733;</span>
        </div>
        <input type="hidden" id="rating" required />

        <label for="comment">Feedback (optional)</label>
        <textarea id="comment" rows="3"></textarea>

        <button type="submit">Submit Rating</button>
      </form>
      <div id="reviews"></div>
    </div>

    <script>
      let orders = {};
      let reviews = [];

      // Checkout
      document
        .getElementById("checkoutForm")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          let name = document.getElementById("fullname").value;
          let product = document.getElementById("product").value;
          let method = document.querySelector(
            "input[name='method']:checked",
          ).value;
          let orderId = "#" + Math.floor(100000 + Math.random() * 900000);
          orders[orderId] = {
            customer: name,
            product,
            method,
            status: "Processing",
          };
          document.getElementById("result").innerHTML =
            `<p class="status">✅ Thank you ${name}, order placed.<br>
        Order ID: <strong>${orderId}</strong></p>`;
          e.target.reset();
        });

      // Tracking
      document.getElementById("trackForm").addEventListener("submit", (e) => {
        e.preventDefault();
        let orderId = document.getElementById("orderId").value.trim();
        let trackBox = document.getElementById("trackResult");
        if (orders[orderId]) {
          trackBox.innerHTML = `<p class="status">Order ${orderId}: <strong>${orders[orderId].status}</strong></p>`;
        } else {
          trackBox.innerHTML = `<p style="background:#fee2e2;color:#b91c1c;padding:8px;border-radius:5px">❌ Order not found.</p>`;
        }
      });

      setInterval(() => {
        for (let id in orders) {
          if (orders[id].status === "Processing") orders[id].status = "Shipped";
          else if (orders[id].status === "Shipped")
            orders[id].status = "Out for Delivery";
          else if (orders[id].status === "Out for Delivery")
            orders[id].status = "Delivered";
        }
      }, 10000);

      // Rating stars
      let stars = document.querySelectorAll(".star");
      stars.forEach((star) => {
        star.addEventListener("click", function () {
          let value = this.dataset.value;
          document.getElementById("rating").value = value;
          stars.forEach((s) => s.classList.remove("active"));
          for (let i = 0; i < value; i++) stars[i].classList.add("active");
        });
      });

      // Submit rating
      document.getElementById("ratingForm").addEventListener("submit", (e) => {
        e.preventDefault();
        let product = document.getElementById("rateProduct").value;
        let rating = document.getElementById("rating").value;
        let comment = document.getElementById("comment").value;
        reviews.push({ product, rating, comment });
        displayReviews();
        e.target.reset();
        stars.forEach((s) => s.classList.remove("active"));
      });

      function displayReviews() {
        let reviewBox = document.getElementById("reviews");
        reviewBox.innerHTML = "<h3>Customer Reviews</h3>";
        reviews.forEach((r) => {
          reviewBox.innerHTML += `
          <div class="review">
            <strong>${r.product}</strong> - ${"⭐".repeat(r.rating)}<br>
            ${r.comment ? r.comment : ""}
          </div>`;
        });
      }
    </script>
  </body>
</html>
